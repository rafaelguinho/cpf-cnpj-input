{"version":3,"file":"index.modern.js","sources":["../src/components/CpfCnpjInput/index.tsx"],"sourcesContent":["import React from 'react'\r\n\r\ntype CpfCnpjInputProps = {\r\n  as?: React.FC<any & InputProps>\r\n  style?: React.CSSProperties\r\n  alwaysShowMask?: boolean\r\n  defaultMaskType?: 'CPF' | 'CNPJ'\r\n}\r\n\r\ntype InputProps = JSX.IntrinsicElements['input']\r\n\r\nexport function clearCpfCnpj(value: string) {\r\n  return value && value.replace(/[^0-9]/g, '')\r\n}\r\n\r\nexport function isCpf(value: string) {\r\n  return value.length === 11\r\n}\r\n\r\nexport function isCnpj(value: string) {\r\n  return value.length === 14\r\n}\r\n\r\nconst TYPES = {\r\n  CPF: '999.999.999-999',\r\n  CNPJ: '99.999.999/9999-99'\r\n}\r\n\r\nconst DEFAULT_MASKS = {\r\n  CPF: '___.___.___-__',\r\n  CNPJ: '__.___.___/____-__'\r\n}\r\n\r\nconst CpfCnpjInput: React.FC<CpfCnpjInputProps & InputProps & any> = ({\r\n  as,\r\n  style,\r\n  alwaysShowMask = false,\r\n  defaultMaskType = 'CPF',\r\n  value = '',\r\n  onChange,\r\n  ...rest\r\n}: CpfCnpjInputProps & InputProps) => {\r\n  const MAX_LENGTH = clearCpfCnpj(TYPES.CNPJ).length\r\n\r\n  const stringValue = String(value)\r\n\r\n  const clearedValue = clearCpfCnpj(stringValue)\r\n  const maskedValue = clearedValue\r\n    ? applyMask(clearedValue, TYPES[getMask(clearedValue)])\r\n    : alwaysShowMask\r\n    ? DEFAULT_MASKS[defaultMaskType]\r\n    : clearedValue\r\n\r\n  function onLocalChange(ev: React.ChangeEvent<HTMLInputElement>) {\r\n    const value = clearCpfCnpj(ev.target.value)\r\n    const mask = getMask(value)\r\n\r\n    let nextLength = value.length\r\n\r\n    const maskedValue =\r\n      nextLength > MAX_LENGTH\r\n        ? applyMask(value.substring(0, MAX_LENGTH), TYPES[mask])\r\n        : applyMask(value, TYPES[mask])\r\n\r\n    ev.target.value = maskedValue\r\n\r\n    onChange && onChange(ev)\r\n  }\r\n\r\n  function getMask(value: string) {\r\n    return value.length > 11 ? 'CNPJ' : 'CPF'\r\n  }\r\n\r\n  function applyMask(value: string, mask: string) {\r\n    let result = ''\r\n\r\n    let inc = 0\r\n    Array.from(value).forEach((letter, index) => {\r\n      if (!mask[index + inc].match(/[0-9]/)) {\r\n        result += mask[index + inc]\r\n        inc++\r\n      }\r\n      result += letter\r\n    })\r\n    return result\r\n  }\r\n\r\n  const CustomInput = as\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {CustomInput ? (\r\n        <CustomInput\r\n          {...rest}\r\n          style={style}\r\n          label='CPF/CNPJ'\r\n          data-testid={'cpf-cnpj'}\r\n          type='text'\r\n          defaultValue={maskedValue}\r\n          onChange={onLocalChange}\r\n        />\r\n      ) : (\r\n        <input\r\n          {...rest}\r\n          style={style}\r\n          data-testid={'cpf-cnpj'}\r\n          type='text'\r\n          defaultValue={maskedValue}\r\n          onChange={onLocalChange}\r\n        />\r\n      )}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default CpfCnpjInput\r\n"],"names":["clearCpfCnpj","value","replace","TYPES","CPF","CNPJ","DEFAULT_MASKS","CpfCnpjInput","as","style","alwaysShowMask","defaultMaskType","onChange","rest","MAX_LENGTH","length","stringValue","String","clearedValue","maskedValue","applyMask","getMask","onLocalChange","ev","target","mask","nextLength","substring","result","inc","Array","from","forEach","letter","index","match","CustomInput","React","Fragment","label","type","defaultValue"],"mappings":"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"}